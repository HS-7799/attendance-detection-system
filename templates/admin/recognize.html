{% extends '/admin/base.html'%}
{% block body %}
<link href="{{ url_for('static', filename='assets/css/recognize.css')}}" rel="stylesheet">
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        // listen for mqtt_message events
        // when a new message is received, log and append the data to the page
        socket.on('mqtt_message', function (data) {
            console.log(data);
            var text = '(' + data['topic'] + ' qos: ' + data['qos'] + ') ' + data['payload'];
            $('#subscribe_messages').append(text + '<br><br>');
        })
    });
</script>

<div id="subscribe_messages"></div>
<div class="container d-flex align-items-center flex-column">
    <!-- Masthead Heading -->
    <div class="wow bounceIn pd-90" data-wow-duration="2s">
        <h1 class="masthead-heading title mb-5">Secure Access IoT Plateforme</h1>
        <hr class="line">
    </div>
    <div class="user" id="profile"></div>

    <!-- Icon Divider -->
    <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-line"></div>
    </div>

    <!-- Student Data -->
    <div class="col-md-3"></div>
    <div class="col-md-6  data wow zoomIn" data-wow-duration="2s" data-wow-delay="2s">
        <div class="lds-dual-ring" id="loading-data"></div>
        <ul style="list-style-type: none; text-align: left; font-weight: 600; display: none;width: 100%;"
            id="student-data">
            <li style="display: none;"><label class="list-elmt">Lastname :</label> <span id="nom"></span></li>
            <li style="display: none;"><label class="list-elmt">Firstname :</label> <span id="prenom"></span>
            </li>
            <li><label class="list-elmt">UID :</label> <span id="uid"></span></li>
            <li><label class="list-elmt">Status :</label> <span id="status"></span></li>
        </ul>
        <div id="cam-loading">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
<!-- Led Lights -->
<div class="led-container  wow fadeInUp" data-wow-duration="2s" data-wow-delay="3s">
    <div class="led-box">
        <div class="led-blue-active" id="pir"></div>
        <h5>PIR</h5>
    </div>
    <div class="led-box">
        <div class="led-orange-inactive" id="rfid"></div>
        <h5>RFID</h5>
    </div>
    <div class="led-box">
        <div class="led-green-inactive" id="cam"></div>
        <h5>CAM</h5>
    </div>
</div>


{%endblock%}